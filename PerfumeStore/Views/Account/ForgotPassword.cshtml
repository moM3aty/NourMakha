@model PerfumeStore.ViewModels.ForgotPasswordViewModel
@{
    ViewData["Title"] = System.Globalization.CultureInfo.CurrentCulture.Name == "ar" ? "نسيت كلمة المرور" : "Forgot Password";
    var isArabic = System.Globalization.CultureInfo.CurrentCulture.Name == "ar";
    Layout = null;
}
<!DOCTYPE html>
<html lang="@System.Globalization.CultureInfo.CurrentCulture.Name" dir="@(isArabic ? "rtl" : "ltr")">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - NourMakha</title>
    <link rel="stylesheet" href="~/css/auth.css" />
    <link rel="icon" type="image/x-icon" href="~/images/logo.png" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Tajawal:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body class="auth-page">
    <div class="auth-container">
        <!-- Left Side - Visual -->
        <div class="auth-left">
            <div class="auth-brand">
                <a href="/" class="logo">
                    <img src="~/images/logo.png" style="width:200px;padding: 10px;" alt="NourMakha" />
                </a>
            </div>

            <div class="auth-illustration">
                <div class="perfume-scene">
                    <!-- Icon for Forgot Password -->
                    <div class="otp-icon-large">
                        <i class="fas fa-key"></i>
                    </div>
                    <div class="sparkles"></div>
                </div>
            </div>

            <div class="auth-features">
                <div class="feature">
                    <i class="fas fa-lock"></i>
                    <span>@(isArabic ? "استعادة آمنة" : "Secure Recovery")</span>
                </div>
                <div class="feature">
                    <i class="fas fa-envelope"></i>
                    <span>@(isArabic ? "تحقق عبر البريد" : "Email Verification")</span>
                </div>
            </div>
        </div>

        <!-- Right Side - Form -->
        <div class="auth-right">
            <div class="auth-form-container">
                <div class="auth-header">
                    <div class="otp-badge">
                        <i class="fas fa-unlock-alt"></i>
                    </div>
                    <h1>@(isArabic ? "نسيت كلمة المرور؟" : "Forgot Password?")</h1>
                    <p>@(isArabic ? "لا تقلق، أدخل بريدك الإلكتروني وسنرسل لك رمز التحقق." : "Don't worry, enter your email and we'll send you a verification code.")</p>
                </div>

                @if (!ViewData.ModelState.IsValid)
                {
                    <div class="alert alert-error">
                        <i class="fas fa-exclamation-circle"></i>
                        <div>
                            @foreach (var error in ViewData.ModelState.Values.SelectMany(v => v.Errors))
                            {
                                <div>@error.ErrorMessage</div>
                            }
                        </div>
                    </div>
                }

                <form asp-action="ForgotPassword" method="post" class="auth-form" id="forgotForm">
                    <div class="form-group">
                        <label asp-for="Email">@(isArabic ? "البريد الإلكتروني" : "Email Address")</label>
                        <div class="input-group">
                            <i class="fas fa-envelope"></i>
                            <input asp-for="Email" type="email" placeholder="example@email.com" required autocomplete="email" />
                        </div>
                        <span asp-validation-for="Email" class="error-message"></span>
                    </div>

                    <button type="submit" class="btn btn-primary btn-block">
                        <span>@(isArabic ? "إرسال رمز التحقق" : "Send Verification Code")</span>
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </form>

                <div class="auth-footer">
                    <a href="/Account/Login" style="display: inline-flex; align-items: center; gap: 0.5rem; color: var(--text-muted); transition: 0.3s;">
                        <i class="fas fa-arrow-left"></i>
                        @(isArabic ? "العودة لتسجيل الدخول" : "Back to Login")
                    </a>
                </div>

                <div class="language-toggle">
                    <a href="/Home/SetLanguage?culture=ar&returnUrl=/Account/ForgotPassword" class="@(isArabic ? "active" : "")">العربية</a>
                    <span>|</span>
                    <a href="/Home/SetLanguage?culture=en&returnUrl=/Account/ForgotPassword" class="@(!isArabic ? "active" : "")">English</a>
                </div>
            </div>
        </div>
    </div>

    <style>
        /* Special styles for icon */
        .otp-icon-large {
            width: 180px;
            height: 180px;
            background: linear-gradient(135deg, rgba(0, 40, 85, 0.1) 0%, rgba(0, 40, 85, 0.05) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            color: #002855;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 2px solid rgba(0, 40, 85, 0.2);
            animation: pulseOtp 3s ease-in-out infinite;
            box-shadow: 0 0 60px rgba(0, 40, 85, 0.1);
        }

        @@keyframes pulseOtp {
            0%, 100% {
                transform: translate(-50%, -50%) scale(1);
                box-shadow: 0 0 60px rgba(0, 40, 85, 0.1);
            }

            50% {
                transform: translate(-50%, -50%) scale(1.05);
                box-shadow: 0 0 80px rgba(0, 40, 85, 0.2);
            }
        }

        .auth-footer a:hover {
            color: #002855;
            transform: translateX( @(isArabic ? "5px" : "-5px") );
        }
    </style>

    <script>
        document.getElementById('forgotForm').addEventListener('submit', function() {
            const btn = this.querySelector('.btn-primary');
            btn.classList.add('loading');
            // Optional: change text
            // btn.querySelector('span').innerText = 'Sending...';
        });
    </script>
</body>
</html>