@model PerfumeStore.Models.Category
@{
    ViewData["Title"] = System.Globalization.CultureInfo.CurrentCulture.Name.StartsWith("ar") ? "إضافة قسم" : "Add Category";
    var isArabic = System.Globalization.CultureInfo.CurrentCulture.Name.StartsWith("ar");
    Layout = "_AdminLayout";
}

<div class="page-header animate-fade-up">
    <div class="header-left">
        <h1>@ViewData["Title"]</h1>
    </div>
    <div class="header-right">
        <a href="/Admin/Categories" class="btn btn-outline">
            <i class="fas fa-arrow-left"></i>
            @(isArabic ? "عودة" : "Back")
        </a>
    </div>
</div>

<div class="card animate-fade-up delay-1" style="max-width: 800px; margin: 0 auto;">
    <div class="card-body" style="padding: 2.5rem;">
        <form asp-action="CreateCategory" method="post" enctype="multipart/form-data" class="premium-form">
            @Html.AntiForgeryToken()

            <div class="form-group">
                <label>@(isArabic ? "صورة القسم" : "Category Image")</label>
                <div class="image-upload-area" style="height: 200px;">
                    <input type="file" name="image" id="imageInput" accept="image/*" class="file-input" />
                    <div class="upload-label">
                        <i class="fas fa-cloud-upload-alt upload-icon"></i>
                        <span class="upload-text">@(isArabic ? "اضغط لرفع صورة" : "Click to upload image")</span>
                    </div>
                    <div id="imagePreview" class="preview-container"></div>
                </div>
            </div>

            <div class="form-group">
                <label>@(isArabic ? "اسم القسم (عربي)" : "Category Name (Arabic)") *</label>
                <input asp-for="NameAr" required dir="rtl" />
            </div>

            <div class="form-group">
                <label>@(isArabic ? "اسم القسم (إنجليزي)" : "Category Name (English)") *</label>
                <input asp-for="Name" required />
            </div>

            <div class="row-grid-2">
                <div class="form-group">
                    <label>@(isArabic ? "ترتيب العرض" : "Display Order")</label>
                    <input asp-for="DisplayOrder" type="number" value="0" />
                </div>
                <div class="form-group" style="display: flex; align-items: flex-end; padding-bottom: 0.5rem;">
                    <label class="checkbox-label">
                        <input asp-for="IsActive" checked />
                        <span>@(isArabic ? "نشط" : "Active")</span>
                    </label>
                </div>
            </div>

            <div class="form-group">
                <label>@(isArabic ? "الوصف (اختياري)" : "Description (Optional)")</label>
                <textarea asp-for="DescriptionAr" rows="3" dir="rtl" placeholder="وصف القسم بالعربي..."></textarea>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn btn-primary btn-lg">
                    <i class="fas fa-save"></i>
                    @(isArabic ? "حفظ القسم" : "Save Category")
                </button>
            </div>
        </form>
    </div>
</div>

<script>
    document.getElementById('imageInput').addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const preview = document.getElementById('imagePreview');
                preview.innerHTML = `<img src="${e.target.result}" alt="Preview" style="max-height: 150px; border-radius: 8px;" />`;
            };
            reader.readAsDataURL(file);
        }
    });
</script>