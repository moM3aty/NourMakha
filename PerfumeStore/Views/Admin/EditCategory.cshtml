@model PerfumeStore.Models.Category
@{
    ViewData["Title"] = System.Globalization.CultureInfo.CurrentCulture.Name.StartsWith("ar") ? "تعديل قسم" : "Edit Category";
    var isArabic = System.Globalization.CultureInfo.CurrentCulture.Name.StartsWith("ar");
    Layout = "_AdminLayout";
}

<div class="page-header animate-fade-up">
    <div class="header-left">
        <h1>@ViewData["Title"]</h1>
        <p>@(isArabic ? $"تعديل بيانات القسم: {Model.NameAr}" : $"Edit category: {Model.Name}")</p>
    </div>
    <div class="header-right">
        <a href="/Admin/Categories" class="btn btn-outline">
            <i class="fas fa-arrow-left"></i>
            @(isArabic ? "عودة للقائمة" : "Back to List")
        </a>
    </div>
</div>

<div class="card animate-fade-up delay-1" style="max-width: 800px; margin: 0 auto;">
    <div class="card-body" style="padding: 2.5rem;">
        <form asp-action="EditCategory" method="post" enctype="multipart/form-data" class="premium-form">
            @Html.AntiForgeryToken()
            <input type="hidden" asp-for="Id" />

            <div class="form-group text-center">
                @if (!string.IsNullOrEmpty(Model.ImageUrl))
                {
                    <div class="current-image mb-3">
                        <img src="@Model.ImageUrl" alt="Current Image" style="width: 100px; height: 100px; object-fit: cover; border-radius: 50%; border: 2px solid var(--gold-primary);" />
                        <p class="text-muted small">@(isArabic ? "الصورة الحالية" : "Current Image")</p>
                    </div>
                }
                <label>@(isArabic ? "تغيير الصورة" : "Change Image")</label>
                <div class="image-upload-area" style="height: 150px;">
                    <input type="file" name="image" id="imageInput" accept="image/*" class="file-input" />
                    <div class="upload-label">
                        <i class="fas fa-camera upload-icon"></i>
                        <span class="upload-text">@(isArabic ? "اضغط لاختيار صورة" : "Click to select image")</span>
                    </div>
                  
                </div>
            </div>

            <div class="form-group">
                <label>@(isArabic ? "اسم القسم (عربي)" : "Category Name (Arabic)") *</label>
                <input asp-for="NameAr" required dir="rtl" />
            </div>

            <div class="form-group">
                <label>@(isArabic ? "اسم القسم (إنجليزي)" : "Category Name (English)") *</label>
                <input asp-for="Name" required />
            </div>

            <div class="row-grid-2">
                <div class="form-group">
                    <label>@(isArabic ? "ترتيب العرض" : "Display Order")</label>
                    <input asp-for="DisplayOrder" type="number" />
                </div>
                <div class="form-group" style="display: flex; align-items: flex-end; padding-bottom: 0.5rem;">
                    <label class="checkbox-label">
                        <input asp-for="IsActive" />
                        <span>@(isArabic ? "نشط" : "Active")</span>
                    </label>
                </div>
            </div>

            <div class="form-group">
                <label>@(isArabic ? "الوصف (اختياري)" : "Description (Optional)")</label>
                <textarea asp-for="DescriptionAr" rows="3" dir="rtl" placeholder="وصف القسم بالعربي..."></textarea>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn btn-primary btn-lg">
                    <i class="fas fa-save"></i>
                    @(isArabic ? "حفظ التعديلات" : "Save Changes")
                </button>
            </div>
        </form>
    </div>
</div>

<script>
    document.getElementById('imageInput').addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const preview = document.getElementById('imagePreview');
                preview.innerHTML = `<img src="${e.target.result}" alt="Preview" style="max-height: 100px; border-radius: 8px;" />`;
            };
            reader.readAsDataURL(file);
        }
    });
</script>