@using System.Globalization
@using PerfumeStore.Models
@model List<Order>
@{
    Layout = "_AdminLayout";
    ViewData["Title"] = CultureInfo.CurrentUICulture.Name.StartsWith("ar") ? "إدارة الطلبات" : "Orders";
    var isArabic = CultureInfo.CurrentUICulture.Name.StartsWith("ar");
    var currentStatus = Context.Request.Query["status"].ToString();
}

<div class="btn-group mb-4 flex-wrap">
    <a href="/Admin/Orders" class="btn @(string.IsNullOrEmpty(currentStatus) ? "btn-gold" : "btn-outline-secondary")">@(isArabic ? "الكل" : "All")</a>
    <a href="/Admin/Orders?status=Pending" class="btn @(currentStatus == "Pending" ? "btn-gold" : "btn-outline-secondary")">@(isArabic ? "قيد الانتظار" : "Pending")</a>
    <a href="/Admin/Orders?status=Shipped" class="btn @(currentStatus == "Shipped" ? "btn-gold" : "btn-outline-secondary")">@(isArabic ? "تم الشحن" : "Shipped")</a>
    <a href="/Admin/Orders?status=Delivered" class="btn @(currentStatus == "Delivered" ? "btn-gold" : "btn-outline-secondary")">@(isArabic ? "تم التسليم" : "Delivered")</a>
    <a href="/Admin/Orders?status=Cancelled" class="btn @(currentStatus == "Cancelled" ? "btn-gold" : "btn-outline-secondary")">@(isArabic ? "ملغي" : "Cancelled")</a>
</div>

<div class="card">
    <div class="card-body">
        <div class="table-responsive">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>@(isArabic ? "العميل" : "Customer")</th>
                        <th>@(isArabic ? "المبلغ" : "Amount")</th>
                        <th>@(isArabic ? "الحالة" : "Status")</th>
                        <th>@(isArabic ? "التاريخ" : "Date")</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var order in Model)
                    {
                        <tr>
                            <td><strong>#@order.Id</strong></td>
                            <td>@order.ShippingFirstName @order.ShippingLastName<br><small class="text-muted">@order.ShippingEmail</small></td>
                            <td>@order.GrandTotal.ToString("N2") OMR</td>
                            <td><span class="badge bg-@(order.Status.ToLower() switch { "pending" => "warning", "shipped" => "info", "delivered" => "success", "cancelled" => "danger", _ => "secondary" })">@order.Status</span></td>
                            <td>@order.CreatedAt.ToString("dd/MM/yyyy HH:mm")</td>
                            <td>
                                <a href="/Admin/OrderDetails/@order.Id" class="btn btn-sm btn-outline-primary"><i class="fas fa-eye"></i></a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>

<style>
    .btn-gold { background: linear-gradient(135deg, #d4af37, #b8960c); border: none; color: white; }
    .btn-gold:hover { background: linear-gradient(135deg, #b8960c, #9a7b0a); color: white; }
</style>
